{% extends 'daily_lotto/lotto_base.html' %}
{% load js %}

    {% block title %}Daily Lotto{% endblock %}
{% load render_table from django_tables2 %}
{% load staticfiles %}
<link rel="stylesheet" href="{% static 'django_tables2/themes/paleblue/css/screen.css' %}"
      xmlns="http://www.w3.org/1999/html"/>

   {% block content %}
   <ul class="nav nav-tabs">
       <li class="active"><a href="#new_draw" data-toggle="tab">Next Draw</a> </li>
       <li><a href="#past_results" data-toggle="tab">Past Results</a> </li>
       <li><a href="#all_time_winners" data-toggle="tab">All time winners</a> </li>
       <li><a href="#rules" data-toggle="tab">Rules</a> </li>
       <li><a href="#your_tickets" data-toggle="tab">My Tickets</a> </li>
   </ul>
    {% if messagesz %}
        <div class="alert alert-success alert-dismissable">
        {% for message in messages %}
        <ul{% if message.tags %} class="{{ message.tags }}"{% endif %}>
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
            {{ message }}
        </ul>
            </div>
    {% endfor %}
    {% endif %}

<br>
    <div class="tab-content" style="background-color: ghostwhite;">
        <div class="tab-pane fade in active" id="new_draw">
            <p>Current Draw:<strong>{{ draw_date }}</strong></p>
            <div class="row">
                <div class="col-md-6">
                    <p>Time Left:<span id="time"></span></p>

                    <p>Total Jackpot:<strong>{{ jackpot }}</strong> </p>
                    <p>Tickets Sold: <strong>{{ sales }}</strong></p>
                </div>

                <div class="col-md-6">
                    <button type="button" class="btn green uppercase btn-md" data-toggle="collapse" href="#collapse1" style="width: 50%; background-color: green"> Buy Ticket @ 500/= </button>

                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div id="collapse1" class="panel-collapse collapse">
                         <form id="selection_form" method="post">
                             {% csrf_token %}
                             <fieldset>
                       <legend><h3>Chose your winning Numbers</h3></legend>
                                 <div class="row">
                                     <div class="col-md-2">
                                         <strong>Number1:</strong>{{ selection_form.n1 }}
                                     </div>
                                     <div class="col-md-2">
                                        <strong>Number2:</strong>{{ selection_form.n2 }}
                                     </div>
                                     <div class="col-md-2">
                                         <strong>Number3:</strong>{{ selection_form.n3 }}
                                     </div>
                                     <div class="col-md-2">
                                         <strong>Number4:</strong>{{ selection_form.n4 }}
                                     </div>
                                     <div class="col-md-2">
                                         <strong>Number5:</strong>{{ selection_form.n5 }}
                                     </div>
                                     <div class="col-md-2">
                                         <strong>Number6:</strong>{{ selection_form.n6 }}
                                     </div>
                                 </div>

                                 <br>
                                 <p>Each Ticket purchased will have a set of randomly selected numbers</p>
                                 <h4><strong><u>Quick pick</u></strong></h4>
                                 {{ random_ticketform.as_p }}
                                 <br>
                             <input type="submit" name="submit" value="Buy Ticket" class="btn green uppercase" />
                            <br>
                             </fieldset>
                             </form>

                            <div class="row">
                                <div class="col-md-6">
                                    </div>
                                <div class="col-md-6">

                                </div>
                                <br>
                                <div class="pull-left">
                                <h3>Total:</h3>
                                    </div>
                                </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane" id="past_results">

       <div class="pull-left">
           {% for dailyLotto in dailyLottos %}

               <a href="previous_list/{{ dailyLotto.id }}"><button class="btn green uppercase" id="right_bt"> << Previous day <i class="fa fa-gg"></i></button></a>
           {% endfor %}
         </div>
             <div class="pull-right">
                 <a href="next_list/{{ dailyLotto.id }}"><button class="btn green uppercase" id="right_bt"> Next day >> <i class="fa fa-gg"></i></button></a>
         </div>
<fieldset>
        <h4>Draw Date:{{ previous_date }}</h4>

            <p>Winning members:<strong>{{ number_of_winners }}</strong></p>
<div id="thisdiv">
            {% for dailyLotto in winning_numbers %}
            <p>Winning Numbers:<span class = "badge" style="color: white; background-color: green">{{ dailyLotto.win1 }}</span> <span class = "badge" style="color: white; background-color: green">{{ dailyLotto.win2 }}</span>
                <span class = "badge" style="color: white; background-color: green">{{ dailyLotto.win3 }}</span> <span class = "badge" style="color: white; background-color: green">{{ dailyLotto.win4 }}</span>
                <span class = "badge" style="color: white; background-color: green">{{ dailyLotto.win5 }}</span> <span class = "badge" style="color: white; background-color: green">{{ dailyLotto.win6 }}</span> </p>
                {% endfor %}
</div>

            <p>Total Prizes:<strong>{{ prize_sum }}/=</strong></p>

            <p>Total Tickets Sold: <strong>{{ previous_sales }}</strong></p>
            <p>Total JackPot:<strong>{{ pjackpot }}/=</strong></p>

            {% if number6Winners > 0 %}
           <p>6Number prize:<strong>{{ number6Winners }}</strong> winners each won <strong>{{ commission6 }}/=</strong></p>
              {% else %}
                 <p>6Number prize:<strong>No winners</strong>,<strong>{{ pjackpot }}/=</strong> added to next day jackpot</p>
             {% endif %}
            {% if number5Winners > 0 %}
            <p>5Number prize:<strong>{{ number5Winners }}</strong> winners each won <strong>{{ commission5 }}/=</strong></p>
            {% else %}
            <p>5Number prize:<strong>No winners</strong>,<strong>{{ pool5_winner }}/=</strong> added to backup jackpot</p>
            {% endif %}

            {% if number4Winners > 0 %}
            <p>4Number prize:<strong>{{ number4Winners }}</strong> winners each won <strong>{{ commission4 }}/=</strong></p>
            {% else %}
            <p>4Number prize:<strong>No winners</strong>,<strong>{{ pool4_winner }}/=</strong> added to backup jackpot</p>
            {% endif %}

            {% if number3Winners > 0 %}
            <p>3Number prize:<strong>{{ number3Winners }}</strong> winners each won <strong>{{ commission3 }}/=</strong></p>
            {% else %}
            <p>3Number prize:<strong>No winners</strong>,<strong>{{ pool3_winner }}/=</strong> added to backup jackpot</p>
            {% endif %}
</fieldset>
            <div class="table-responsive">
<table class="table table-striped table-bordered table-hover">
<caption><strong>WINNERS</strong></caption>
<thead>
 <tr style="color: #4cbb17;background-color: #333;">
    <th>UserName</th>
    <th>Numbers</th>
    <th>Hits</th>
    <th>Prize</th>
 </tr>
</thead>
 <tbody>

 {% for dailyLottoResult in dailyLottoResult_list %}
     <tr>
         <td><strong>{{ dailyLottoResult.winners }}</strong></td>
         <td><strong>{{ dailyLottoResult.daily_lotto_ticket }}</strong></td>
         <td><strong>{{ dailyLottoResult.hits_number_prize }}</strong></td>
         <td><strong>{{ dailyLottoResult.prize }}</strong></td>
     </tr>
     {% empty %}
     <strong style="color: white; background: green">No winners</strong>
 {% endfor %}
 </tbody>
  </table>
</div>

        </div>

        <div class="tab-pane" id="all_time_winners">
            <div class="table-responsive">
<table class="table table-striped table-bordered table-hover">
<caption><strong>WINNERS</strong></caption>
<thead>
 <tr style="color: #4cbb17;background-color: #333;">
    <th>UserName</th>
    <th>Ticket</th>
    <th>Win Amount</th>
    <th>Draw Date</th>
 </tr>
</thead>
 <tbody>
 {% for all_time_winners in highest_winners %}
     <tr>
         <td><strong>{{ all_time_winners.winners }}</strong></td>
         <td><span class="badge" style="color: #4cbb17; background-color: #333">{{ all_time_winners.daily_lotto_ticket }}</span></td>
         <td><strong>{{ all_time_winners.prize }}</strong></td>
         <td><strong>{{ all_time_winners.draw_date }}</strong></td>
     </tr>
     {% empty %}
     <strong style="color: white; background: green">No winners</strong>
 {% endfor %}
 </tbody>
  </table>
            </div>
        </div>

         <div class="tab-pane" id="rules">
             <P>Each ticket purchase lets you pick 6 unique numbers(1-50)for the next draw that will take place at 00:00 server time.</P>
<br>
<P>Tickets sales for each draw ends 5minutes prior to the draw time.</P>
   Users may purchase an unlimited number of tickets for each draw.
<p>Prizes are paid at the time of the draw.</p>
<br>
<br>
<p>Each 500/= ticket is applied as follows:</p>
<ul>
<li>25 commission for  the house</li>
<li>225/= is added to the 6 number jackpot</li>
<li>125/= is added to the 5 number daily prize pool</li>
<li>75/= is added to the 4 number daily prize pool</li>
    <li>50/= is added to the 3 number daily prize pool</li>
</ul>
<p>Prizes are paid for matching 3 or more numbers.For which you will share an equal
    portion of the applicable prize fund with any other winners that draw. In the event that there are no
    winners for the jackpot, then it shall rolled over to the next draw. And in the event there are no winners for 3,4 or
5 number prizes,then the prize fund shall be added to the backup jackpot. Which will replace the current 6
    number jackpot when someone wins it. </p>
        </div>

    <div class="tab-pane" id="your_tickets">

            <h3>My Tickets</h3>

        <div class="row">
            <div class="col-md-12">
                <div class="table-responsive">
            {% render_table table %}
                    </div>
            </div>
        </div>

        </div>

    </div>
       <link href="{% static 'tossapp/assets/css/ts_game_history.css' %}" rel="stylesheet" type="text/css" />
       <link href="{% static 'tossapp/assets/css/ts_lotto.css' %}" rel="stylesheet" type="text/css" />
       <script src="{% static 'daily_lotto/js/lotto_timer.js' %}" type="text/javascript"></script >
       <script src="{% static 'daily_lotto/js/win.js' %}" type="text/javascript"></script>
       <script src="{% static 'daily_lotto/js/lotto_auto.js' %}" type="text/javascript"></script>
{% endblock %}




{#{% block content %}#}
{#{% include "daily_lotto/includes/htmlsnippet.html" %}#}
{#{% endblock %}#}